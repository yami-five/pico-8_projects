image = "777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777671565777777777777776776777777777777775770777777777777777777777777777777777777777707707777777707600770777777777777777777777777670051057d77777777777717607777777777777757707777777777777777777777777777777777777777777777777777777707707777777777777777777777771700765775777777777777076077777777777777177077777777777777777777777777776777777777777777777777777777077077777777777777777777777707707777775700107d77770500d0570050767777171000707705007577000577500160770077057d776700700700007607700770777777777777777777777777067006007d067d0f60777707f07705760670777757f057605760675077007777507600760076007777771770677f067507700770777777777777777777777777067006007d0d7f07607777076077057707707777177067601770775077007777d0770076056500777777077177d6057507600760777777777777777777777777076077077d057707d077775760770177077077775670f76007707710f7007777d07700761650d0777777077107d1067507700770777777777777777777777777570055057d0650057077770710d50d510170777717706760d750156067007777d07700766700757777770775065505750760076077777777777777777777777777d700d177f715d07677776705616701607777775770f76177061076f7007777d07701767700777777770770d7000d75077007707777777777777777777777777777667f777767767777777767777766777777777776777f77677677776f7777767766777700777777770770776667766776677677777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777767d077777707007d77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777776776777777d766777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777767dd76777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777f756547d77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777d74dd5ff66d6d55d444444fd77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777554455445545545545444464777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777774555445425454545444444a4767777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777d75554454445444444444444d47a7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777545524544445444444444444a56d7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777767554554544454544544d44d44a5d4767777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777776704554444454545444444544444dd6d7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777775755525444444545544444444445f4d47677777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777775455555455444455444444d54444d4557d77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777f75504404545455444454d444444dd4a057577777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777f755505545555444445a5555459a454a007577777777777777777777777777777767d6777777777777777777777777777777777777777777777777777777777756542522544544444555555544a4444405747777777777777777777777777777777700757777777777777777777777777777777777777777777777777777777745445445445444454d045205554544545475777777777777777777777777777777675d77777777777777777777777777777777777777777777777777777777f745554444454544aaf6455050545255455475777777777777777777777777777767775f777777777777777777777777777777777777777777777777777777775f4455445454444da46fad44555d54525555757777777777777777777777777777577777777777777777777777777777777777777777777777777777777777a7554545454444d4daadd6addadd4a54255555d5777777777777777777777777777747777777777777777777777777777777777777777777777777777777777756454444444545a444dfffdaadfd4d44522552557777777777777777777777777777d776777777776777777777777777777777777777777777777777777777d75554545454454544a466f46f6dada44454445455657777777777777777777777677dd76d76777767a6767777777777777777777777777777777777777777674454444454544444449da4ddfdddd6add454440400517777777777777777777777f716675505107d6f4665777777777777777777777777777777777777777756544444544452454444a444ddf666dd464d44440400507d777777777777777777777767507d777767da5a7077777777777777777777777777777777777777f74445544454255455454544a4a4da44a454d45546550000707777777777777777777777f7017d7777d74d557d777777777777777777777777777777777777775d4545454544555445554445d4fa465d55445da5450500057577777777777777777777777767d07777a6444577777777777777777777777777777777777777674554444445455554554255544444ad4d55554ad444540500757777777777777777d775777777077647665475777777777777777777777777777777777777775655555444545455445242545445a44d5d055544ad555505057d777777777777777777167777777777fd54d17f777777777777777777777777777777777777775d45554554444444455544454544d4dd44255545544d5555517f777777777777777777577d777777776d55657777777777777777777777777777777777777777542555455445444445544445444545464554555055555555f677777777777777777777775d76777766d405767777777777777777777777777777777777777767555455524445445444444554444444dfd6545455555576777777777777777777675555455fd077776f55657777777777777777777777777777777777777777df25255555454444444444444444d4d4ada44d555544d57f777777777777777777f700055550107767ad5475777767ddf67777777777777777777777777777775425554255444444d5d4adddddd45dddadda4d444d5dfd7777777777777777777777567577676677d64d55664d44445545667f777777777777777777777777f7554552522244455444ad4dafdaaadadff46f6daad5d5747777777777777777777777775576777767dd55455455555442055544767777777777777777777777674554555544424254a444a4d4ddf6fadddf666aa6dddd7d77777777777777777777777757657777ad5a05545455554255050055a5767777777777777777777767555425225555454544da4a4694ddddaffa44ad666daa7d777777777777777777777777671d7767d65d55555544255452255555556d7777777777777777777757455425222555444444444444944dd446f44dddfff6fa7d7777777777777777d665777777f77666d6054544555544555250025055457f7777777777777777775655554525455544444da444ddfd64d6afad4dfdfd6d6d7d7777777777777707f5d76077777767445d405555544545255500525050506d7777777777777777675445445452555544d4d44d44aa49d6446fdff66aafd6d6767777777777777756777715777777d6664555555545444455542550045455f57777777777777777d7555444545225554445ad4da464ddf6daff4f6da66d4add767777777777777770777757767777665d55555555449449545554455005554576777777777777775f555254545525554444aad4fdaadaafffddda6dad4a6fa67677777777777777707777776177674d550425525594a49555445545552455457d7777777777777756505255452424525554a46466afdfff4a4fdf6df6aaddf67d7777777777777761777777f177f7555555452554949a49542455522555525274777777777777775625254254555245454444a4aaf444af64fa6a66dadd44aa7d77777777777777557677777577665d50250552455555a9495555555255555565777777777777770d54252254242544454454a44a6addff6a6aad666d4f4da47d77777777777777576077577767d605554555554555a4445b5445554552445565777777777777775454554552552244425444d4d4aada996f44fdddadda5ada74777777777777777716156577dd5a550255454455444449454445555555545552767777777777775d25255245444552554545444dddfd6d4d66adaadadda4ad74777777777777777767d47677dd0550402555454445b4994944545552555555556f7777777777775d55555445445545455445449aad9446adddaddf6ddddddd747777776715757777777777665d55505052554444454a444b495445545555550564777777777777545555545544554545544544444d94fd4d6ddfad9ddd6a5d7477777706746d77777777f7da0524505054554455459494494455552542555455557677777777775d55555254454424555444544444d4494dd6a449d4dddd4a7d777777717706017777775754405505455454452545599a494455545455555554557677777777775f555245455455554445544544444dddadd44d444aafa4a4f5777767717755567d7777dd55dd0500524545545045495445445455554525225552f47777777777565525522554555545454545445444ddad664d4aada6dd6d7577777755d67d777077775d504701005554452545454999494455554544555252256577777777775721522225425555554055454444dad444dd455d4aad66a4757777d6575077677577d60d775700555544555554559a44b4445455525454555525507f777777774755255552255525055444445444ad44aa4d5444add44446757757d5770d77577d77665577070500555544205094994b94554554452555255552547677777777f75d55252555552555555554444444da4ddd4554a56dda46f477575076d7605d77675475770750005555555044954a99495b5455452254554225556477777777774f5555522225545555454545544dd4d544455545444fad64776f6177770675776655777757005050554045559999554444545555252425452555647777777777775425255552555550445454444ad44ddd042545d4d66d64d4f67777777777d7567d7777675d5550505545959499b55444555525245555542524457677777777774d55552555550205554544a45444d5445544554dfd444a54dd6d76777777665d77777767df5554554545b49999445554544454555422454555557f7777777777f755552555555255444544444d4ddd55545055a4ddd4dad4d554d46d766746f577777777776f56455445599954995945442555555552445455557f7777777777775640005425455555454445aa4dd444545254a5adaadd4d4555dd44f46755767777777777774f45459b99999a4b54555455252255525554555076777777777777f75540000044454544544a444ad4dd4d5455456da4f477fff65dd5fd567577777777777777a7445444499a99444445555525552555454555557d777777777777775f055505555555554444446d964dd45555455dddfd7f77776f64d6547677777777777777d754459b5499495b5454544555424242555555557477777777777777775655555504455445d4494dddadad5a455544dada767777777746d577777777777777f7d75455955a4949945554252425542455545544557477777777777777777756055404454544d4a44dd6addadd455544dd54ff7777776754747777777777777777a795599555995444555454455244555444545505757777777777777777776754155044554545dda966daadda5d55d4944d6d7f77776755777777777777777777df955954945545445455255445555555555555546577777777777777777777775605505554444aaa6d46f4da6a5555444a4a5545664d75777777777777777777574445b4b4999454554555244544554555545550657777777777777777777777776f55555544dd446d66f666ff6f67d4ddaddd4d445d65777777777777777777d7455b9b9ab54444545545544555545555552552657777777777777777777777777767554545daf477777777777777d7ddd4dddd5d5555767777777777777777d75a4595994b54445544455544545454545425555576777777777777777777777777f7544444a4767777777777777767afa6dd5454455a7f777777777777777747954a9499a44b4944555444455544445555520240767777777777777777777777777746554464777777777777777777f7dfdad445dd6d767777777777777777a7594ba5a9a59444595454445445555444525504557677777777777777777777777777675544647f7777777777777777776fdd4d44dd76777777777777777777d744545995994999494544449b445455552552255576777777777777777777777777776745446477777777777777777777f6ddd4dd447f777777777777777777df5a454954495544454944b444494b5424555555527d777777777777777777777777776755446a7f7777777777777777777766ddf6667f777777777777777777674aba499a459944959444499559544555555555507d77777777777777777777777777674544a47677777777777777777777777777777777777777777777777767464aa54b545544454b44554454445505555555507d77777777777777777777777777675444d47677777777777777777777777777777777777777777777777767dadad4ddd54d5da4455aa45a45445454544445547677777777777777777777777777f755444476777777777777777777777777777777777777777777777777f766f6f6666ffffad66fa6daad6aaaaaa6f4dddd6d7f77777777777777777777777777775544447a77777777777777777777777777777777777777777777777777f7677777f7f6ffff7fffffff7f777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777"

delays = {}
t = 0
buf = ""

function hex(value)
	result = tostr(value, true)
	result = sub(result, 5, 6)
	return result
end

function load_sprites()
	for i = 1, 16384, 2 do
		poke((i - 1) / 2, "0x" .. sub(image, i, i + 1))
	end
end

function melting()
	image = ""
	for i = 0, 127, 1 do
		if delays[i+1]==0 then
			for j = 128, 0, -1 do
				poke(i+(j-1)*64, @(i+(j-2)*64))
			end
		else
			delays[i+1]+=1
		end
	end
end

function _init()
	for i = 1, 128, 1 do
		add(delays, flr(rnd(30)) - 29)
	end
	load_sprites()
end

function _update()
	t+=1
	if t%3==0 then	melting() end
end

function _draw()
	cls()
	spr(0, 0, 0, 16, 16)
end